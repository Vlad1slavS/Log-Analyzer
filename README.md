# Transaction Log Analyzer

Java-приложение для обработки и анализа логов переводов между пользователями.

## Описание
Приложение читает лог-файлы с информацией о финансовых операциях пользователей, анализирует их и создает индивидуальные файлы для каждого пользователя с полной историей его транзакций и рассчитанным финальным балансом.

## Поддерживаемые операции

- `balance inquiry %количество%` - запрос текущего баланса средств пользователя
- `transferred %количество% to %пользователь%` - перевод средств другому пользователю
- `withdrew %количество%` - снятие средств

## Требования

- Java 8+
- Только стандартная библиотека Java SE

## Сборка и запуск

### С использованием Gradle

```bash
# Компиляция проекта
mvn compile

# Сборка проекта с тестами
mvn package

# Сборка без тестов
mvn package -DskipTests

# Создание исполняемого jar-файла
mvn clean package

# Запуск
java -jar target/LogAnalyzer-1.0.jar <путь-к-директории-с-логами>
```

### Без Maven (компиляция вручную)

```bash
# Компиляция
javac -d target/classes src/main/java/io/github/logprocessor/**/*.java

# Создание jar
jar -cfe log-processor.jar io.github.logprocessor.LogProcessorApplication -C target/classes .

# Запуск
java -jar log-processor.jar /path/to/log/directory
```

## Пример входных данных

**log1.log**
```
[2025-05-10 09:00:22] user001 balance inquiry 1000.00
[2025-05-10 09:05:44] user001 transferred 100.00 to user002
[2025-05-10 10:30:55] user005 transferred 10.00 to user003
```

**log2.log**
```
[2025-05-10 10:03:23] user002 transferred 990.00 to user001
[2025-05-10 10:15:56] user002 balance inquiry 110.00
[2025-05-10 23:55:32] user002 withdrew 50
```

## Пример выходных данных

После обработки в директории `transactions_by_users/` будут созданы файлы:

**user001.log**
```
[2025-05-10 09:00:22] user001 balance inquiry 1000
[2025-05-10 09:05:44] user001 transferred 100 to user002
[2025-05-10 10:03:23] user001 received 990 from user002
[2025-06-06 15:30:45] user001 final balance 1890
```

**user002.log**
```
[2025-05-10 09:05:44] user002 received 100 from user001
[2025-05-10 10:03:23] user002 transferred 990 to user001
[2025-05-10 10:15:56] user002 balance inquiry 110
[2025-05-10 23:55:32] user002 withdrew 50
[2025-06-06 15:30:45] user002 final balance 60
```

## Особенности реализации

### Обработка переводов

Каждый перевод генерирует две транзакции:
1. Исходящий перевод для отправителя (`transferred X to Y`)
2. Входящий перевод для получателя (`received X from Y`)

### Расчет финального баланса

Алгоритм расчета:
1. Находит последний запрос баланса (`balance inquiry`) как базовое значение
2. Применяет все транзакции после этого запроса:
    - Исходящие переводы уменьшают баланс
    - Входящие переводы увеличивают баланс
    - Снятия уменьшают баланс
3. Если запросов баланса нет, выводится сообщение об ошибке

### Сортировка

Все транзакции в выходных файлах сортируются по времени по возрастанию.

